library(sf)
library(tidyverse)
lanes <- st_read("tow_lanes.kml")
library(here)
set_here(path='..')
lanes <- st_read(here("data", "tow_lanes.kml"))
library(here)
library(sf)
library(tidyverse)
#info
# vessel type code 52 is for tug boats, 31 and 32 for tow
# (https://api.vtexplorer.com/docs/ref-aistypes.html)
#load data
lanes <- st_read(here("data", "tow_lanes.kml")) %>%
st_make_valid()
View(lanes)
library(here)
library(sf)
library(tidyverse)
#load data
lanes <- st_read(here("data", "Towlanes_WASG_2007", "Towlanes_WASG_2007.shp")) %>%
st_make_valid()
#load data
lanes <- st_read(here("data", "Towlanes_WASG_2007", "Towlanes_WASG_2007.shp")) %>%
st_make_valid()
#coos bay
coosBay <- data.frame(longitude = -124.217888, latitude = 43.366501) %>%
st_as_sf(., coords = c('longitude', 'latitude'), crs = 4326)
#plot data
ggplot() +
geom_sf(data = lanes, fill = "transparent") +
geom_sf(data = coast) +
geom_sf(data = coosBay, color = "red") +
coord_sf(xlim = c(-124.217888 - 1, -124.217888 + 1),
ylim = c(43.366501 - 1, 43.366501 + 1)) +
theme_bw() +
theme(legend.position = "none")
#plot data
ggplot() +
geom_sf(data = lanes, fill = "transparent") +
geom_sf(data = coosBay, color = "red") +
coord_sf(xlim = c(-124.217888 - 1, -124.217888 + 1),
ylim = c(43.366501 - 1, 43.366501 + 1)) +
theme_bw() +
theme(legend.position = "none")
#plot data
ggplot() +
geom_sf(data = lanes, fill = "transparent") +
theme_bw() +
theme(legend.position = "none")
coast <- st_read(here("data", "us_medium_shoreline",
"us_medium_shoreline.shp"))
#plot data
leaflet(lanes) %>%
addTiles()
library(leaflet)
#plot data
leaflet(lanes) %>%
addTiles()
??addPolygons
??leaflet::addPolygons
st_crs(lanes)
class(lanes)
leaflet(lanes) %>%
addTiles() %>%
addPolygons()
lanes <- st_read(here("data", "Towlanes_WASG_2007", "Towlanes_WASG_2007.shp")) %>%
st_make_valid() %>%
st_transform(crs = 4326)
#plot data
leaflet(lanes) %>%
addTiles() %>%
addPolygons()
#load data
lanes <- st_read(here("data", "Towlanes_WASG_2007", "Towlanes_WASG_2007.shp")) %>%
st_make_valid() %>%
st_transform(crs = 4326)
#plot data
lanes_map <- leaflet(lanes) %>%
addTiles() %>%
addPolygons()
saveWidget(lanes_map, file = here("output", "choro_imap.html"))
library(here)
library(sf)
library(tidyverse)
library(leaflet)
library(htmlwidgets) #save maps as .html files
#load data
lanes <- st_read(here("data", "Towlanes_WASG_2007",
"Towlanes_WASG_2007.shp")) %>%
st_make_valid() %>%
st_transform(crs = 4326)
#plot data
lanes_map <- leaflet(lanes) %>%
addTiles() %>%
addPolygons()
saveWidget(lanes_map, file = here("output", "lanes_map.html"))
library(here)
library(sf)
library(tidyverse)
library(leaflet)
library(htmlwidgets) #save maps as .html files
dat <- read_csv(here("data", "Towlane_all_ordered.csv")) %>%
st_as_sf(., coords = c("long_dd", "lat_dd"), crs = 4326)
dat <- cbind(dat, st_coordinates(dat %>% select(geometry)))
towlane_order_2019 <- leaflet(dat) %>%
addTiles() %>%
addCircleMarkers(lng = ~X, lat = ~Y,
popup = ~line)
towlane_order_2019
library(here)
library(sf)
library(tidyverse)
library(leaflet)
library(htmlwidgets) #save maps as .html files
dat <- read_csv(here("data", "Towlane_all_jk.csv")) %>%
st_as_sf(., coords = c("long_dd", "lat_dd"), crs = 4326)
dat <- cbind(dat, st_coordinates(dat %>% select(geometry)))
towlane_order_2019 <- leaflet(dat) %>%
addTiles() %>%
addCircleMarkers(lng = ~X, lat = ~Y,
popup = ~line)
towlane_order_2019
names(dat)
#process points -> polygons
lines <- dat %>%
group_by(line) %>%
arrange(order) %>%
summarize(m = mean(X)) %>%
st_cast("LINESTRING")
leaflet(lines) %>%
addTiles() %>%
addPolylines()
leaflet(lines) %>%
addTiles() %>%
addPolylines() %>%
addCircleMarkers(dat, lng = ~X, lat = ~Y,
popup = ~line_order_comb)
??addCircleMarkers
leaflet() %>%
addTiles() %>%
addPolylines(lines) %>%
addCircleMarkers(dat, lng = ~X, lat = ~Y,
popup = ~line_order_comb)
leaflet() %>%
addTiles() %>%
addPolylines(data = lines) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
popup = ~line_order_comb)
leaflet() %>%
addTiles() %>%
addPolylines(data = lines) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.25, popup = ~line_order_comb)
leaflet() %>%
addTiles() %>%
addPolylines(data = lines, popup = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.25, popup = ~order)
leaflet() %>%
addTiles() %>%
addPolylines(data = lines, popup = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.5, popup = ~order)
leaflet() %>%
addTiles() %>%
addPolylines(data = lines, label = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.5, label = ~order)
lines <- dat %>%
group_by(line) %>%
summarize(m = mean(X)) %>%
st_cast("LINESTRING")
#inspect
leaflet() %>%
addTiles() %>%
addPolylines(data = lines, label = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.5, label = ~order)
#process points -> polygons
lines <- dat %>%
group_by(line) %>%
summarize(m = mean(X), do_union=FALSE) %>%
st_cast("LINESTRING")
#inspect
leaflet() %>%
addTiles() %>%
addPolylines(data = lines, label = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.5, label = ~order)
#inspect
leaflet() %>%
addTiles() %>%
addPolylines(data = lines %>% filter(line == "y_1_"), label = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.5, label = ~order)
unique(dat$line)
leaflet() %>%
addTiles() %>%
addPolylines(data = lines %>% filter(line == "y_2_"), label = ~line) %>%
addCircleMarkers(data = dat, lng = ~X, lat = ~Y,
radius = 0.5, label = ~order)
lines %>% filter(line == "y_2_")
dat %>% filter(line == "y_2_")
